<div class="h-full w-full">
  <!-- サイドメニュー -->
  <ng-template #sideMenuContent>
    <div class="p-4">
      <h3 class="font-bold text-md mb-2">絵師ページメニュー</h3>
      <ul class="space-y-2">
        <li><a href="#" class="text-sm text-blue-600 hover:underline">新規登録</a></li>
        <li><a href="#" class="text-sm text-blue-600 hover:underline">検索フィルター</a></li>
      </ul>
    </div>
  </ng-template>
  <!-- ページヘッダー -->
  <app-page-header [title]="'絵師検索'">
    <button class="px-2 py-1 ml-4 text-xs rounded border border-gray-300 bg-white hover:bg-blue-100 active:bg-blue-200 transition-colors duration-150" (click)="clearSort();">
      ソート解除
    </button>
  </app-page-header>
  <!-- メインコンテンツ -->
  <div class="pb-16">
    <app-content-spinner [showSpinner]="status==='load'" [showContentAlways]="false">
      <!-- 絵師情報結果表示 -->
      <span>総件数：{{ total }}件</span>
      <div class="overflow-x-auto">
        <!-- デスクトップ版テーブル (md以上) -->
        <div class="hidden md:block">
          <app-flexible-table-desktop #artistTableDesktop
            [data]="data"
            [thLabels]="labels"
            [hideColumns]="hideColumns"
            [trackByKeys]="trackByKeys"
            [sortedColumns]="currentSort"
            [styles]="desktopStyles"
            [parentComponent]="this"
            [rowHeight]="'280px'"
            [enableVirtualScroll]="data.length > 30"
            [virtualRowHeight]="280"
            (sortEvent)="onChangeSort($event)">
          </app-flexible-table-desktop>
        </div>
        <!-- モバイル版テーブル (md未満) -->
        <div class="block md:hidden">
          <app-flexible-table-mobile #artistTableMobile
            [data]="data"
            [thLabels]="labels"
            [hideColumns]="hideColumns"
            [trackByKeys]="trackByKeys"
            [sortedColumns]="currentSort"
            [styles]="mobileStyles"
            [parentComponent]="this"
            [rowHeight]="'280px'"
            (sortEvent)="onChangeSort($event)">
          </app-flexible-table-mobile>
        </div>
      </div>
      <!-- 追加ロード時のスピナー表示 -->
      <app-content-spinner [showSpinner]="status==='add'" [size]="'24px'" [padding]="'8px'"></app-content-spinner>
    </app-content-spinner>
  </div>
</div>
<!-- ImageModal -->
<app-flexible-modal
  [showBackdrop]="true"
  [showCloseButton]="true"
  [isOpen]="isOpenImageModal"
  [size]="'full'"
  (closeEvent)="closeImageModal()">
  <div class="flex flex-col md:flex-row gap-4 p-4 h-full overflow-hidden">
    <div class="flex justify-center items-center w-full md:w-1/2 h-full min-h-0">
      @if (modalImageA && modalImageA.mimeType.includes("image/")) {
        <img [src]="modalImageA.url" class="w-full h-full object-contain rounded shadow" (click)="window.open(modalImageA.url, '_blank')"/>
      } @else if (modalImageA && modalImageA.mimeType.includes("video/")) {
        <video [src]="modalImageA.url" controls class="w-full h-full object-contain rounded shadow" (click)="window.open(modalImageA.url, '_blank')"></video>
      }
    </div>
    <div class="flex justify-center items-center w-full md:w-1/2 h-full min-h-0">
      @if (modalImageB && modalImageB.mimeType.includes("image/")) {
        <img [src]="modalImageB.url" class="w-full h-full object-contain rounded shadow" (click)="window.open(modalImageB.url, '_blank')"/>
      } @else if (modalImageB && modalImageB.mimeType.includes("video/")) {
        <video [src]="modalImageB.url" controls class="w-full h-full object-contain rounded shadow" (click)="window.open(modalImageB.url, '_blank')"></video>
      }
    </div>
  </div>
</app-flexible-modal>